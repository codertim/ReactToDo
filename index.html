<html>
    <meta charset="utf-8" />
    <head>
        <title>React To Do</title>

        <!-- Scripts -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    </head>
    <body>
        <h1>React To Do List</h1>
        <div id="divcontent">
        </div>

        <script type="text/jsx">
            var testing = "Blah Blah Blah";
            var myTasks = [1, 9, 15];


            var AllTasks = React.createClass({
                getInitialState: function() {
                    return {
                        // TODO: delete me - tasks: ["Groceries", "Bills"]
                    };
                },
                render: function() {
                    return (
                        <div className="allTasks">
                            <hr />
                            Current Tasks: <br />
                            { this.props.someTasks.join(", ") }
                            <hr />
                        </div>
                    );
                }
            });


            var NewTaskBox = React.createClass({
                getInitialState: function() {
                    return { currentTasks: ["Bills", "Groceries"]};
                },
                handleMyChange: function(event) {
                    // alert("In handleChange!!! - this.props.someTasks = " + JSON.stringify(this.props.someTasks));
                    console.log("myTasks= " + JSON.stringify(myTasks));
                    console.log("this.state.currentTasks= " + JSON.stringify(this.state.currentTasks));
                    var newTaskValue = document.getElementById("newtask").value;
                    this.setState({
                        currentTasks: this.state.currentTasks.concat([newTaskValue])
                    });
                    document.getElementById("newtask").value = "";
                },
                render: function() {
                    return (
                        <div className="newTaskBox">
                            <AllTasks someTasks={this.state.currentTasks} />
                            Enter New Task: <input type="text" name="newtask" id="newtask" />
                            <button id="addnewtask" onClick={this.handleMyChange}>Add</button>
                        </div>
                    );
                }
            });


            var ToDo = React.createClass({
                render: function() {
                    return (
                        <div>
                            <h2>To-Do List in React!</h2>
                            <NewTaskBox someTasks={myTasks} />
                        </div>
                    );
                }
            });

            React.render(
                <ToDo />,
                document.getElementById("divcontent")
            );
        </script>
    </body>
</html>
